import{r as g,ap as N,aq as R,a3 as D,h as V,k as W,q as G,l as I,ar as z,ac as F,o as v,c as h,a as C,t as A,i as H,g as T,ab as E,R as P}from"./C_V3QOGJ.js";import{V as B}from"./C52CURbo.js";import"./WO1tszi_.js";function $(e){return R()?(D(e),!0):!1}function S(e){return typeof e=="function"?e():V(e)}const _=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const J=Object.prototype.toString,K=e=>J.call(e)==="[object Object]",Q=()=>{};function U(e){let t;function o(){return t||(t=e()),t}return o.reset=async()=>{const a=t;t=void 0,a&&await a},o}function X(e,t,o={}){const{immediate:a=!0}=o,s=g(!1);let n=null;function l(){n&&(clearTimeout(n),n=null)}function c(){s.value=!1,l()}function f(...u){l(),s.value=!0,n=setTimeout(()=>{s.value=!1,n=null,e(...u)},S(t))}return a&&(s.value=!0,_&&f()),$(c),{isPending:N(s),start:f,stop:c}}function Y(e){var t;const o=S(e);return(t=o==null?void 0:o.$el)!=null?t:o}const Z=_?window:void 0,j=_?window.navigator:void 0;function q(...e){let t,o,a,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,a,s]=e,t=Z):[t,o,a,s]=e,!t)return Q;Array.isArray(o)||(o=[o]),Array.isArray(a)||(a=[a]);const n=[],l=()=>{n.forEach(i=>i()),n.length=0},c=(i,d,m,y)=>(i.addEventListener(d,m,y),()=>i.removeEventListener(d,m,y)),f=G(()=>[Y(t),S(s)],([i,d])=>{if(l(),!i)return;const m=K(d)?{...d}:d;n.push(...o.flatMap(y=>a.map(b=>c(i,y,b,m))))},{immediate:!0,flush:"post"}),u=()=>{f(),l()};return $(u),u}function ee(){const e=g(!1),t=z();return t&&I(()=>{e.value=!0},t),e}function x(e){const t=ee();return W(()=>(t.value,!!e()))}function M(e,t={}){const{controls:o=!1,navigator:a=j}=t,s=x(()=>a&&"permissions"in a);let n;const l=typeof e=="string"?{name:e}:e,c=g(),f=()=>{n&&(c.value=n.state)},u=U(async()=>{if(s.value){if(!n)try{n=await a.permissions.query(l),q(n,"change",f),f()}catch{c.value="prompt"}return n}});return u(),o?{state:c,isSupported:s,query:u}:c}function te(e={}){const{navigator:t=j,read:o=!1,source:a,copiedDuring:s=1500,legacy:n=!1}=e,l=x(()=>t&&"clipboard"in t),c=M("clipboard-read"),f=M("clipboard-write"),u=W(()=>l.value||n),i=g(""),d=g(!1),m=X(()=>d.value=!1,s);function y(){l.value&&w(c.value)?t.clipboard.readText().then(r=>{i.value=r}):i.value=L()}u.value&&o&&q(["copy","cut"],y);async function b(r=S(a)){u.value&&r!=null&&(l.value&&w(f.value)?await t.clipboard.writeText(r):O(r),i.value=r,d.value=!0,m.start())}function O(r){const p=document.createElement("textarea");p.value=r??"",p.style.position="absolute",p.style.opacity="0",document.body.appendChild(p),p.select(),document.execCommand("copy"),p.remove()}function L(){var r,p,k;return(k=(p=(r=document==null?void 0:document.getSelection)==null?void 0:r.call(document))==null?void 0:p.toString())!=null?k:""}function w(r){return r==="granted"||r==="prompt"}return{isSupported:u,text:i,copied:d,copy:b}}const ne={class:"codeblock"},oe={key:0,class:"code__header"},ae={class:"code__header_filename"},se={class:"code__header_lang"},re={class:"code__body"},ue=F({__name:"ProsePre",props:{code:{type:String,default:""},language:{type:String,default:null},filename:{type:String,default:null},highlights:{type:Array,default:()=>[]},meta:{type:String,default:null},class:{type:String,default:null}},setup(e){const{copy:t}=te(),o=e,a=g(!1),s=()=>{a.value=!0,t(o.code),setTimeout(()=>{a.value=!1},1e3)};return(n,l)=>(v(),h("div",ne,[e.filename||e.language?(v(),h("div",oe,[C("div",ae,A(e.filename),1),C("div",se,A(e.language),1)])):H("",!0),C("div",re,[V(a)?(v(),T(B,{key:1,icon:"fa-solid fa-check",class:"copied"})):(v(),T(B,{key:0,icon:"fa-regular fa-paste",class:"copy",onClick:s})),e.filename||e.language?(v(),h("pre",{key:2,class:E(n.$props.class)},[P(n.$slots,"default")],2)):(v(),h("pre",{key:3,class:E(n.$props.class),style:{padding:".75rem .75rem"}},[P(n.$slots,"default")],2))])]))}});export{ue as default};
