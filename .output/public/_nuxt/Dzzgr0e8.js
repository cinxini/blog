import{D as q,V as B,_ as D}from"./Cuc9Zfu7.js";import{u as G,r as _,k as w,f as E,l as L,q as S,g as O,w as b,o as i,a as x,d as f,t as V,b as y,h as c,s as $,c as m,i as F}from"./C_V3QOGJ.js";import{q as h,u as M}from"./B-GY23he.js";import{_ as U}from"./BzyWSZ_1.js";import{c as P}from"./cve-lzbr.js";import{V as j}from"./CmFbPU8L.js";import"./D1DXdQ9i.js";import"./C52CURbo.js";import"./WO1tszi_.js";import"./DF58bc2X.js";import"./B_wa_0oN.js";import"./CFqgnv7v.js";/* empty css        */import"./CINA2u-a.js";import"./CdnC7oAK.js";const W={class:"text-center text-h5"},z={class:"text-primary"},H={key:0,class:"d-flex flex-row justify-center ma-16"},I={key:1},J={key:0,class:"text-center"},K={key:1,class:"text-center"},Q={class:"text-primary"},X={key:2},de={__name:"[...slug]",async setup(Y){let a,p;const{path:A,query:k,params:C}=G(),g=_(!1),l=_(1),o=_(null),t=w(()=>C.slug.length>0?C.slug[0]:null),e=_(k.type?k.type:"all"),v=async(s,n,d)=>{g.value=!0;let u=null;try{u=await h(`/${d==="all"?"":d}`).where({category:s}).sort({"dates.published":-1}).skip((n-1)*P.POSTS_PER_PAGE).limit(P.POSTS_PER_PAGE).find()}catch(T){console.log("error",T)}finally{g.value=!1}return u};o.value=([a,p]=E(()=>h(`/${e.value==="all"?"":e.value}`).where({category:t.value}).count()),a=await a,p(),a);const{data:r}=([a,p]=E(()=>M(`category-${A}`,()=>v(t.value,l.value,e.value))),a=await a,p(),a),N=w(()=>o.value===0?1:Math.ceil(o.value/P.POSTS_PER_PAGE));L(async()=>{o.value||(o.value=await h(`/${e.value==="all"?"":e.value}`).where({category:t.value}).count()),r.value||(r.value=await v(t.value,l.value,e.value))}),S(e,async s=>{o.value=await h(`/${s==="all"?"":s}`).where({category:t.value}).count(),l.value=1,r.value=await v(t.value,l.value,s)}),S(l,async s=>{r.value=await v(t.value,s,e.value)});const R=w(()=>!!(r.value&&r.value.length>0));return(s,n)=>{const d=D;return i(),O(j,{class:"main-container w-66"},{default:b(()=>[x("p",W,[f(" Posted in "),x("span",z,V(t.value),1),f(" Category")]),y(U,{modelValue:c(e),"onUpdate:modelValue":n[0]||(n[0]=u=>$(e)?e.value=u:null)},null,8,["modelValue"]),c(g)?(i(),m("div",H,[y(q)])):(i(),m("div",I,[c(o)>0?(i(),m("p",J,"Found "+V(c(o))+" posts.",1)):(i(),m("p",K,[f("No posts with category "),x("span",Q,V(t.value),1),f(".")])),R.value?(i(),m("div",X,[y(d,{articles:c(r)},null,8,["articles"]),y(B,{length:N.value,modelValue:c(l),"onUpdate:modelValue":n[1]||(n[1]=u=>$(l)?l.value=u:null),"next-icon":"fa-solid fa-caret-right","prev-icon":"fa-solid fa-caret-left",rounded:"lg",color:"grey","active-color":"primary"},null,8,["length","modelValue"])])):F("",!0)]))]),_:1})}}};export{de as default};
